<!DOCTYPE html>
<html lang="es-ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expresiones | nsyslog</title>
    <meta name="description" content="El agente de la próxima generación">
    
    
    <link rel="preload" href="/assets/css/0.styles.79931b71.css" as="style"><link rel="preload" href="/assets/js/app.e497b60b.js" as="script"><link rel="preload" href="/assets/js/2.d8bd88d5.js" as="script"><link rel="preload" href="/assets/js/38.a125878b.js" as="script"><link rel="prefetch" href="/assets/js/10.25be7a11.js"><link rel="prefetch" href="/assets/js/100.1fd11945.js"><link rel="prefetch" href="/assets/js/101.bd0254f2.js"><link rel="prefetch" href="/assets/js/102.160dedfe.js"><link rel="prefetch" href="/assets/js/103.a43c212b.js"><link rel="prefetch" href="/assets/js/104.72a470ac.js"><link rel="prefetch" href="/assets/js/105.552a58d1.js"><link rel="prefetch" href="/assets/js/106.704e1d77.js"><link rel="prefetch" href="/assets/js/107.d2ee6071.js"><link rel="prefetch" href="/assets/js/108.d423a06e.js"><link rel="prefetch" href="/assets/js/109.7ab54c94.js"><link rel="prefetch" href="/assets/js/11.67557d65.js"><link rel="prefetch" href="/assets/js/110.1b128357.js"><link rel="prefetch" href="/assets/js/111.7742d7ca.js"><link rel="prefetch" href="/assets/js/112.794ea947.js"><link rel="prefetch" href="/assets/js/113.d60b2e70.js"><link rel="prefetch" href="/assets/js/114.fa889948.js"><link rel="prefetch" href="/assets/js/115.2f3609a0.js"><link rel="prefetch" href="/assets/js/116.2382ccde.js"><link rel="prefetch" href="/assets/js/117.0a39c803.js"><link rel="prefetch" href="/assets/js/118.18aff04a.js"><link rel="prefetch" href="/assets/js/119.105d2cb1.js"><link rel="prefetch" href="/assets/js/12.c9f8299f.js"><link rel="prefetch" href="/assets/js/120.d1e5c01a.js"><link rel="prefetch" href="/assets/js/121.061fa520.js"><link rel="prefetch" href="/assets/js/13.4458b283.js"><link rel="prefetch" href="/assets/js/14.3236e528.js"><link rel="prefetch" href="/assets/js/15.6c9fcf56.js"><link rel="prefetch" href="/assets/js/16.7ac77464.js"><link rel="prefetch" href="/assets/js/17.11771f33.js"><link rel="prefetch" href="/assets/js/18.1d6a5d99.js"><link rel="prefetch" href="/assets/js/19.5f3b3bf7.js"><link rel="prefetch" href="/assets/js/20.038a2dfd.js"><link rel="prefetch" href="/assets/js/21.a07e47c5.js"><link rel="prefetch" href="/assets/js/22.1ad069e0.js"><link rel="prefetch" href="/assets/js/23.b4d1f27e.js"><link rel="prefetch" href="/assets/js/24.cb5726e6.js"><link rel="prefetch" href="/assets/js/25.000ef583.js"><link rel="prefetch" href="/assets/js/26.16c500a4.js"><link rel="prefetch" href="/assets/js/27.4332b535.js"><link rel="prefetch" href="/assets/js/28.0c040c7b.js"><link rel="prefetch" href="/assets/js/29.b8fd9d3d.js"><link rel="prefetch" href="/assets/js/3.6ff0db38.js"><link rel="prefetch" href="/assets/js/30.1b395c0e.js"><link rel="prefetch" href="/assets/js/31.b2fb8f98.js"><link rel="prefetch" href="/assets/js/32.d34398c2.js"><link rel="prefetch" href="/assets/js/33.09b9a05b.js"><link rel="prefetch" href="/assets/js/34.877c8f3f.js"><link rel="prefetch" href="/assets/js/35.2319ab57.js"><link rel="prefetch" href="/assets/js/36.46826e1b.js"><link rel="prefetch" href="/assets/js/37.52c2f365.js"><link rel="prefetch" href="/assets/js/39.5699d0eb.js"><link rel="prefetch" href="/assets/js/4.3776f917.js"><link rel="prefetch" href="/assets/js/40.96565717.js"><link rel="prefetch" href="/assets/js/41.87e5ff6a.js"><link rel="prefetch" href="/assets/js/42.8eb25147.js"><link rel="prefetch" href="/assets/js/43.3682bf33.js"><link rel="prefetch" href="/assets/js/44.4274b921.js"><link rel="prefetch" href="/assets/js/45.b89bf82d.js"><link rel="prefetch" href="/assets/js/46.2be48b0a.js"><link rel="prefetch" href="/assets/js/47.7d3f6e29.js"><link rel="prefetch" href="/assets/js/48.723c2aea.js"><link rel="prefetch" href="/assets/js/49.90952974.js"><link rel="prefetch" href="/assets/js/5.201f9484.js"><link rel="prefetch" href="/assets/js/50.b12880ff.js"><link rel="prefetch" href="/assets/js/51.2e8cdf1b.js"><link rel="prefetch" href="/assets/js/52.fe6dab50.js"><link rel="prefetch" href="/assets/js/53.1fc7be6b.js"><link rel="prefetch" href="/assets/js/54.af6a4a03.js"><link rel="prefetch" href="/assets/js/55.ef513e19.js"><link rel="prefetch" href="/assets/js/56.ae7be80c.js"><link rel="prefetch" href="/assets/js/57.56fbc8f1.js"><link rel="prefetch" href="/assets/js/58.4a383a96.js"><link rel="prefetch" href="/assets/js/59.26479323.js"><link rel="prefetch" href="/assets/js/6.ce391908.js"><link rel="prefetch" href="/assets/js/60.56b8e80c.js"><link rel="prefetch" href="/assets/js/61.da8a70b7.js"><link rel="prefetch" href="/assets/js/62.d43d9ce8.js"><link rel="prefetch" href="/assets/js/63.c7ada83a.js"><link rel="prefetch" href="/assets/js/64.89d4e92c.js"><link rel="prefetch" href="/assets/js/65.ab963038.js"><link rel="prefetch" href="/assets/js/66.b8a11416.js"><link rel="prefetch" href="/assets/js/67.79a17332.js"><link rel="prefetch" href="/assets/js/68.1cf9a12b.js"><link rel="prefetch" href="/assets/js/69.8773efdc.js"><link rel="prefetch" href="/assets/js/7.71f1338d.js"><link rel="prefetch" href="/assets/js/70.c800b687.js"><link rel="prefetch" href="/assets/js/71.289f6850.js"><link rel="prefetch" href="/assets/js/72.6c4dc4a1.js"><link rel="prefetch" href="/assets/js/73.9515f00c.js"><link rel="prefetch" href="/assets/js/74.6a2b7ff8.js"><link rel="prefetch" href="/assets/js/75.8638dc37.js"><link rel="prefetch" href="/assets/js/76.db9a5250.js"><link rel="prefetch" href="/assets/js/77.d5ac182b.js"><link rel="prefetch" href="/assets/js/78.4ecc0819.js"><link rel="prefetch" href="/assets/js/79.8d9e146d.js"><link rel="prefetch" href="/assets/js/8.4938feae.js"><link rel="prefetch" href="/assets/js/80.3de8f9cf.js"><link rel="prefetch" href="/assets/js/81.c41d9ec9.js"><link rel="prefetch" href="/assets/js/82.36eb15cc.js"><link rel="prefetch" href="/assets/js/83.7fe510af.js"><link rel="prefetch" href="/assets/js/84.d52ec84e.js"><link rel="prefetch" href="/assets/js/85.42676dd5.js"><link rel="prefetch" href="/assets/js/86.2be597ee.js"><link rel="prefetch" href="/assets/js/87.ee8b94f6.js"><link rel="prefetch" href="/assets/js/88.37efe603.js"><link rel="prefetch" href="/assets/js/89.20dbc4ef.js"><link rel="prefetch" href="/assets/js/9.266c7a40.js"><link rel="prefetch" href="/assets/js/90.c16ccb38.js"><link rel="prefetch" href="/assets/js/91.9f225352.js"><link rel="prefetch" href="/assets/js/92.18241469.js"><link rel="prefetch" href="/assets/js/93.6f8df5a5.js"><link rel="prefetch" href="/assets/js/94.f4610960.js"><link rel="prefetch" href="/assets/js/95.4f092a2c.js"><link rel="prefetch" href="/assets/js/96.47303597.js"><link rel="prefetch" href="/assets/js/97.dd78b59a.js"><link rel="prefetch" href="/assets/js/98.589603ed.js"><link rel="prefetch" href="/assets/js/99.f1b81aa0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.79931b71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="inner"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/es/" class="home-link router-link-active"><!----> <span class="site-name">nsyslog</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/es/intro/install.html" class="nav-link">Inicio</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es/intro/basics.html" class="nav-link">Introducción</a></li><li class="dropdown-item"><!----> <a href="/es/config/basic.html" class="nav-link">Configuración</a></li><li class="dropdown-item"><!----> <a href="/es/inputs/index.html" class="nav-link">Fuentes</a></li><li class="dropdown-item"><!----> <a href="/es/processors/index.html" class="nav-link">Procesadores</a></li><li class="dropdown-item"><!----> <a href="/es/transporters/index.html" class="nav-link">Transportes</a></li></ul></div></div><div class="nav-item"><a href="/jsdoc/index.html" class="nav-link">API docs</a></div><div class="nav-item"><a href="https://github.com/solzimer/nsyslog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Descarga
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/intro/expressions.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/es/intro/expressions.html" class="nav-link router-link-exact-active router-link-active">Español</a></li></ul></div></div> <!----></nav> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="docs-layout"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/es/intro/install.html" class="nav-link">Inicio</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es/intro/basics.html" class="nav-link">Introducción</a></li><li class="dropdown-item"><!----> <a href="/es/config/basic.html" class="nav-link">Configuración</a></li><li class="dropdown-item"><!----> <a href="/es/inputs/index.html" class="nav-link">Fuentes</a></li><li class="dropdown-item"><!----> <a href="/es/processors/index.html" class="nav-link">Procesadores</a></li><li class="dropdown-item"><!----> <a href="/es/transporters/index.html" class="nav-link">Transportes</a></li></ul></div></div><div class="nav-item"><a href="/jsdoc/index.html" class="nav-link">API docs</a></div><div class="nav-item"><a href="https://github.com/solzimer/nsyslog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Descarga
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/intro/expressions.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/es/intro/expressions.html" class="nav-link router-link-exact-active router-link-active">Español</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/es/intro/install.html" class="sidebar-link">Instalación</a></li><li><a href="/es/intro/basics.html" class="sidebar-link">Conceptos básicos</a></li><li><a href="/es/intro/example1.html" class="sidebar-link">Ejemplo 1: Servidor de syslog</a></li><li><a href="/es/intro/example2.html" class="sidebar-link">Ejemplo 2: Lectura y parseo de fichero CSV</a></li><li><a href="/es/intro/commands.html" class="sidebar-link">Línea de comandos</a></li><li><a href="/es/intro/cli.html" class="sidebar-link">Modo CLI</a></li><li><a href="/es/intro/expressions.html" class="active sidebar-link">Expresiones</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#motores-de-expresion" class="sidebar-link">Motores de expresión</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#expresiones-de-evaluacion" class="sidebar-link">Expresiones de evaluación</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#expresiones-de-interpolacion" class="sidebar-link">Expresiones de interpolación</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#accesores" class="sidebar-link">Accesores</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#evaluacion-javascript" class="sidebar-link">Evaluación javascript</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#trucos" class="sidebar-link">Trucos</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#tipo-de-salida" class="sidebar-link">Tipo de salida</a></li><li class="sidebar-sub-header"><a href="/es/intro/expressions.html#mas-sobre-expresiones" class="sidebar-link">Más sobre expresiones</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="expresiones"><a href="#expresiones" aria-hidden="true" class="header-anchor">#</a> Expresiones</h1> <p>Las expresiones son parte del corazón de nsyslog; con ellas, podemos dotar de dinamismo y toma de decisión cada aspecto de la configuración y comportamiento de los componentes de ejecución.</p> <p>Una gran mayoría de atributos de la configuración de nsyslog son alterables mediante expresiones.</p> <h2 id="motores-de-expresion"><a href="#motores-de-expresion" aria-hidden="true" class="header-anchor">#</a> Motores de expresión</h2> <p>nsyslog no está ligado a un sólo tipo de expresiones, sino que puede albergar distintos motores. Actualmente, los motores soportados son:</p> <h3 id="jsexpr"><a href="#jsexpr" aria-hidden="true" class="header-anchor">#</a> jsexpr</h3> <p>Un motor basado en expresiones evaluables a javascript. Las expresiones <a href="https://www.npmjs.com/package/jsexpr" target="_blank" rel="noopener noreferrer">jsepxr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> son cadenas de texto y/o objetos JSON que contienen elementos del tipo <strong>${[accesor]}</strong>, donde <strong>[accesor]</strong> es la ruta de una propiedad del dato de entrada.</p> <h3 id="mingo"><a href="#mingo" aria-hidden="true" class="header-anchor">#</a> mingo</h3> <p>Un motor basado en el lenguaje de consultas de MongoDB. <a href="https://www.npmjs.com/package/mingo" target="_blank" rel="noopener noreferrer">Mingo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ofrece todas las características de dicho lenguaje para evaluar condiciones sobre objetos JSON.</p> <p>Adicionalmente, nsyslog incorpora los siguientes operadores de consulta adicionales:</p> <ul><li><strong>$starts</strong> / $startsWith : Una propiedad de texto empieza por una determinada cadena</li> <li><strong>$ends</strong> / $endsWith : Una propiedad de texto termina por una determinada cadena</li> <li><strong>$contains</strong> : Una propiedad de texto contiene una determinada cadena</li></ul> <p>Además, añade el siguiente operador de expresión:</p> <ul><li><strong>$eval</strong> : Evalua una expresion <em>jsexpr</em></li></ul> <p>De esta forma, es posible incluso mezclar ambos motores, permitiendo crear expresiones complejas que aprovechan lo mejor de ambos motores.</p> <h2 id="expresiones-de-evaluacion"><a href="#expresiones-de-evaluacion" aria-hidden="true" class="header-anchor">#</a> Expresiones de evaluación</h2> <p>Las expresiones de evaluación son aquellas que nos permiten crear una condición en base a los datos de entrada. Son usadas principalmente en filtros y condiciones sobre flujos, para decidir si un dato debe o no ser procesado por un componente.</p> <p>Las expresiones de evaluación pueden usar tanto el motor <em>jsepxr</em> como el motor <em>mingo</em>.</p> <p>Dado el dato:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;max&quot;</span> <span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>	<span class="token property">&quot;min&quot;</span> <span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;bytes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token property">&quot;rec&quot;</span> <span class="token operator">:</span> <span class="token number">124</span><span class="token punctuation">,</span> <span class="token property">&quot;sent&quot;</span> <span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;packets&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token property">&quot;rec&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;sent&quot;</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john@doe.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;severity&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Ejemplos de expresiones de evaluación son:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Expresiones jsexpr</span>

<span class="token string">&quot;${data.max} - ${data.min} &gt; 10&quot;</span>	<span class="token comment">// true</span>
<span class="token string">&quot;${user.email}.match(/[a-zA-Z0-9]+@.+\.com/)&quot;</span>	<span class="token comment">// true</span>
<span class="token string">&quot;${bytes.sent} / ${bytes.rec}&quot;</span> <span class="token comment">// =&gt; 8.06</span>
<span class="token string">&quot;Math.abs(${packets.rec} - ${packets.sent})&quot;</span> <span class="token comment">// =&gt; 9</span>
<span class="token string">&quot;(${bytes.sent} &gt; ${bytes.rec}) &amp;&amp; ${sev}&gt;2&quot;</span> <span class="token comment">// true</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Expresiones MongoDB</span>

<span class="token punctuation">{</span>
	<span class="token string">&quot;data.max&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;$gt&quot;</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;$lt&quot;</span><span class="token punctuation">:</span><span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;severity&quot;</span> <span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Expresiones mixtas</span>

<span class="token punctuation">{</span>
	<span class="token string">&quot;$and&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span> <span class="token string">&quot;email&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;$endsWith&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;.com&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> <span class="token string">&quot;$expr&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;$eval&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${data.max} - ${data.min} &gt; 10&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="expresiones-de-interpolacion"><a href="#expresiones-de-interpolacion" aria-hidden="true" class="header-anchor">#</a> Expresiones de interpolación</h2> <p>Las expresiones de interpolación transfieren proiedades de un origen a un destino. De esta forma podemos componer, por ejemplo, cadenas de texto derivadas de propiedades de una entrada, o realizar una transformación de una entrada a una salida. En este caso el único motor disponible es el <em>jsepxr</em>.</p> <p>Al igual que antes, si tomamos como dato de entrada:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;max&quot;</span> <span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>	<span class="token property">&quot;min&quot;</span> <span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;bytes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token property">&quot;rec&quot;</span> <span class="token operator">:</span> <span class="token number">124</span><span class="token punctuation">,</span> <span class="token property">&quot;sent&quot;</span> <span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;packets&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;rec&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;sent&quot;</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john@doe.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;severity&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Podemos componer expresiones de interpolación:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>i1 <span class="token operator">=</span> <span class="token string">&quot;El usuario ${user.name} ha enviado ${bytes.sent} bytes&quot;</span><span class="token punctuation">;</span>
i2 <span class="token operator">=</span> <span class="token string">&quot;El ratio de datos es ${bytes.sent / this.bytes.rec} bytes&quot;</span><span class="token punctuation">;</span>
i3 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;user&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${user.name} &lt;${user.email}&gt;&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;rec&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${bytes.rec}&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${bytes.rec}&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;sent&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${bytes.sent}&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;${packets.sent}&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Dando como resultado:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>o1 <span class="token operator">=</span> <span class="token string">&quot;El usuario John ha enviado 1000 bytes&quot;</span><span class="token punctuation">;</span>
o2 <span class="token operator">=</span> <span class="token string">&quot;El ratio de datos es 8.064516129032258 bytes&quot;</span><span class="token punctuation">;</span>
o3 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;user&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;John &lt;john@doe.com&gt;&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;rec&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token number">124</span><span class="token punctuation">,</span> <span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token number">124</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 	<span class="token string">&quot;sent&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token number">12</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="accesores"><a href="#accesores" aria-hidden="true" class="header-anchor">#</a> Accesores</h2> <p>Llamamos accesores (<em>accessors</em>) a los elementos de la forma <strong>${[accesor]}</strong> usados por las expresiones para <strong>acceder</strong> a las propiedades del dato de entrada.</p> <p>Usando como dato de entrada:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;user&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;John &lt;john@doe.com&gt;&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;rec&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token number">124</span><span class="token punctuation">,</span>
		<span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token number">124</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;sent&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;bytes&quot;</span> <span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
		<span class="token string">&quot;packets&quot;</span> <span class="token punctuation">:</span> <span class="token number">12</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="forma-generica"><a href="#forma-generica" aria-hidden="true" class="header-anchor">#</a> Forma genérica</h3> <p>La forma genérica de uso es la siguiente:</p> <div class="language- extra-class"><pre class="language-text"><code>${prop1.subprop2...subpropN}
${this.prop1.subprop2...subpropN}
</code></pre></div><p>En dicha forma, no es necesario referenciar el dato de entrada; la ruta empieza siempre por <em>this</em>, o por la propiedad de primer nivel:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Expresión válida</span>
<span class="token string">&quot;${user.email} =&gt; ${rec.bytes}&quot;</span>
<span class="token string">&quot;${this.rec.bytes}&quot;</span>

<span class="token comment">// Expresiones inválidas</span>
<span class="token string">&quot;${data.user.email}&quot;</span>
</code></pre></div><h3 id="json"><a href="#json" aria-hidden="true" class="header-anchor">#</a> JSON</h3> <p>Si lo que se desea es obtener una representación en JSON del dato de entrada, se puede usar la expresión:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;${JSON}&quot;</span>
<span class="token string">&quot;${JSON&lt;:path&gt;}&quot;</span>
<span class="token string">&quot;${JSON&lt;:spaces&gt;}&quot;</span>
<span class="token string">&quot;${JSON&lt;:path&gt;&lt;:spaces&gt;}&quot;</span>
</code></pre></div><p>Esto dará como resultado el dato de entrada serializado y formateado:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'{\n  &quot;user&quot;: &quot;John &lt;john@doe.com&gt;&quot;,\n  &quot;rec&quot;: {\n    &quot;bytes&quot;: 124,\n    &quot;packets&quot;: 124\n  },\n  &quot;sent&quot;: {\n    &quot;bytes&quot;: 1000,\n    &quot;packets&quot;: 12\n  }\n}'</span>
</code></pre></div><h3 id="puntero-this"><a href="#puntero-this" aria-hidden="true" class="header-anchor">#</a> Puntero &quot;this&quot;</h3> <p>En ciertas ocasiones puede ser necesario que un mismo accesor referencie a multiples propiedades del dato de entrada. En estos casos, la primera referencia usará la forma genérica, mientras que las restantes requieren el uso del puntero <strong>this</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Interpolación</span>
<span class="token string">&quot;El ratio de entrada / salida es ${rec.bytes / this.sent.bytes}&quot;</span>

<span class="token comment">// Evaluación</span>
<span class="token string">&quot;${rec.bytes || this.rec.packets}&quot;</span>
<span class="token string">&quot;${this.rec.bytes || this.rec.packets}&quot;</span>
</code></pre></div><p>Darán como resultado:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Interpolación</span>
<span class="token string">&quot;El ratio de entrada / salida es 0.124&quot;</span>

<span class="token comment">// Evaluación</span>
<span class="token number">124</span>
</code></pre></div><h2 id="evaluacion-javascript"><a href="#evaluacion-javascript" aria-hidden="true" class="header-anchor">#</a> Evaluación javascript</h2> <p>Las expresiones jsexpr permiten evaluar código javascript, aunque su forma difiere si son expresiones de evaluación o de interpolación.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Evaluación</span>
<span class="token string">&quot;${name}.length &gt; 0&quot;</span>
<span class="token string">&quot;${timestamp}.toISOString()&quot;</span>

<span class="token comment">// Interpolación</span>
<span class="token string">&quot;${name.length&gt;0}&quot;</span>
<span class="token string">&quot;${timestamp.toISOString()}&quot;</span>
</code></pre></div><p>Como se puede ver, en las expresiones de evaluación, el código javascript ocurre fuera del accesor, ya que éste sólo referencia al valor accedido, y luego la expresión resultante es evaluada como javascript.
En el caso de las expresiones de interpolación, el código ocurre dentro del accesor, ya que todo lo que ocurra fuera de éste, es interpretado como texto que se interpola junto al resultado de evaluar el accesor.</p> <h2 id="trucos"><a href="#trucos" aria-hidden="true" class="header-anchor">#</a> Trucos</h2> <p>Es posible usar funciones inline anónimas, siempre y cuando no incluyan llaves (<strong>{}</strong>):</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Evaluación</span>
<span class="token string">&quot;${data.iplist}.some(ip=&gt;ip.startsWith('192.'))&quot;</span>

<span class="token comment">// Interpolación</span>
<span class="token string">&quot;${text.split(' ').filter(word=&gt;word.length&gt;3).join(' ')}&quot;</span>
</code></pre></div><p>También es posible referenciar datos y funciones que no pertenecen a un objeto:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;${null || new Date()}&quot;</span>
<span class="token string">&quot;${null || [1,2,3,4,5]}&quot;</span>
<span class="token string">&quot;${null || JSON.parse(this.jsontext)}&quot;</span>
</code></pre></div><h2 id="tipo-de-salida"><a href="#tipo-de-salida" aria-hidden="true" class="header-anchor">#</a> Tipo de salida</h2> <p>Tanto en el caso de la evaluación como la interpolación, el tipo de dato de salida tratará de ajustarse siempre según los siguientes criterios:</p> <ul><li>Evaluación: Las expresiones de evaluación ejecutan la expresión resultado como código javascript, por lo que el tipo de dato resultante será el obtenido por dicha evaluación.</li> <li>Interpolación:
<ul><li>Si el resultado es un objeto, la salida permanece como objeto.</li> <li>Si el resultado es una cadena de texto, pero es evaluablea a un tipo simple (número, booleano...), ese será su tipo de salida. En caso contrario, permanecerá como cadena de texto.</li></ul></li></ul> <p>Ejemplos:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Evaluación</span>
<span class="token string">&quot;${rec.bytes || this.rec.packets}&quot;</span> <span class="token comment">// =&gt; 124, numérico</span>
<span class="token string">&quot;${rec.bytes} &gt; 0&quot;</span> <span class="token comment">// =&gt; true, booleano</span>

<span class="token comment">// Interpolación</span>
<span class="token string">&quot;${rec.bytes}&quot;</span> <span class="token comment">// 124, numérico</span>
<span class="token string">&quot;${rec.bytes} bytes&quot;</span> <span class="token comment">// &quot;124 bytes&quot;, texto</span>
</code></pre></div><h2 id="mas-sobre-expresiones"><a href="#mas-sobre-expresiones" aria-hidden="true" class="header-anchor">#</a> Más sobre expresiones</h2> <p>Puedes obtener más información sobre las expresiones visitando los proyectos <a href="https://www.npmjs.com/package/jsexpr" target="_blank" rel="noopener noreferrer">jsepxr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> y <a href="https://www.npmjs.com/package/mingo" target="_blank" rel="noopener noreferrer">Mingo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, así como todos los ejemplos de configuración de nsyslog en <a href="https://github.com/solzimer/nsyslog/tree/master/examples/config" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/es/intro/cli.html" class="prev">
          Modo CLI
        </a></span> <!----></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e497b60b.js" defer></script><script src="/assets/js/2.d8bd88d5.js" defer></script><script src="/assets/js/38.a125878b.js" defer></script>
  </body>
</html>
